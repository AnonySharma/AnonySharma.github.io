import{A as N,S as k,E,P as C,j as e}from"./index-CcM3InOB.js";import{r,S as j,X as v,e as P,f as R,g as z}from"./icons-vendor-Dw6EnsV_.js";import{G as T}from"./genai-vendor-DOBy76H9.js";import"./react-vendor-Bzgz95E1.js";let x=null;const D=()=>`
    You are the AI digital avatar of Ankit Kumar. You are currently living on his portfolio website.
    Your goal is to answer questions from recruiters, hiring managers, or visitors about Ankit's background, skills, and professional experience.
    
    Here is Ankit's profile data:
    - **Bio:** ${N}
    - **Skills:** ${k.join(", ")}
    - **Experience:** ${JSON.stringify(E)}
    - **Projects:** ${JSON.stringify(C)}
    - **Education:** IIT (BHU) Varanasi, B.Tech in CSE (2019-2023).
    - **Achievements:** Ranked 61 in ICPC Regionals.
    
    **Tone:** Professional, intelligent, humble, and concise.
    **Rules:**
    1. Keep answers concise (under 100 words usually).
    2. If asked about something not in the data, say you don't know but suggest contacting Ankit directly.
    3. Emphasize his strength in Problem Solving (ICPC) and Full Stack Development.
    4. You are helpful and polite.
    
    If the user says "Hi" or "Hello", introduce yourself as Ankit's AI assistant.
  `,H=()=>x||(x=new T({apiKey:"PLACEHOLDER_API_KEY"}).chats.create({model:"gemini-2.5-flash",config:{systemInstruction:D()}}),x),M=async a=>{const o=H();try{return await o.sendMessageStream({message:a})}catch(s){throw console.error("Gemini API Error:",s),s}},$=()=>{const[a,o]=r.useState(!1),[s,p]=r.useState(""),[h,b]=r.useState(!1),[w,n]=r.useState([{role:"model",text:"Hello! I'm Ankit's AI Avatar. Ask me about his experience at Salesforce, his coding skills, or his time at IIT BHU.",timestamp:new Date}]),y=r.useRef(null),S=()=>{var t;(t=y.current)==null||t.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{S()},[w]);const A=async t=>{if(t==null||t.preventDefault(),!s.trim()||h)return;const l={role:"user",text:s,timestamp:new Date};n(c=>[...c,l]),p(""),b(!0);try{n(i=>[...i,{role:"model",text:"",timestamp:new Date,isStreaming:!0}]);const c=await M(l.text);let d="";for await(const i of c){const u=i.text;u&&(d+=u,n(I=>{const f=[...I],g=f[f.length-1];return g.role==="model"&&g.isStreaming&&(g.text=d),f}))}n(i=>{const m=[...i],u=m[m.length-1];return u.isStreaming=!1,m})}catch{n(d=>[...d,{role:"model",text:"I'm having trouble connecting to my brain (Gemini API). Please try again later.",timestamp:new Date}])}finally{b(!1)}};return e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end",children:[a&&e.jsxs("div",{className:"mb-4 w-80 sm:w-96 bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[500px] transition-all animate-in slide-in-from-bottom-10 fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary to-indigo-600 p-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-white/20 p-1.5 rounded-full",children:e.jsx(j,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm",children:"Ankit's AI Avatar"}),e.jsxs("p",{className:"text-indigo-100 text-xs flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Powered by Gemini"]})]})]}),e.jsx("button",{onClick:()=>o(!1),className:"text-white/80 hover:text-white",children:e.jsx(v,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-900",children:[w.map((t,l)=>e.jsx("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm ${t.role==="user"?"bg-primary text-white rounded-tr-none":"bg-slate-800 text-slate-200 rounded-tl-none border border-slate-700"}`,children:[t.text,t.isStreaming&&e.jsx("span",{className:"inline-block w-1 h-4 ml-1 bg-white align-middle animate-pulse",children:"|"})]})},l)),e.jsx("div",{ref:y})]}),e.jsxs("form",{onSubmit:A,className:"p-3 bg-slate-800 border-t border-slate-700 flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:t=>p(t.target.value),placeholder:"Ask about my experience...",className:"flex-1 bg-slate-900 border border-slate-700 rounded-full px-4 py-2 text-sm text-white focus:outline-none focus:border-primary transition-colors"}),e.jsx("button",{type:"submit",disabled:h||!s.trim(),className:"p-2 bg-primary text-white rounded-full hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsx(P,{size:18,className:"animate-spin"}):e.jsx(R,{size:18})})]})]}),e.jsx("button",{onClick:()=>o(!a),className:"group flex items-center justify-center w-14 h-14 bg-gradient-to-br from-primary to-secondary rounded-full shadow-lg hover:shadow-primary/50 transition-all hover:scale-110 active:scale-95",children:a?e.jsx(v,{size:24,className:"text-white"}):e.jsxs(e.Fragment,{children:[e.jsx(z,{size:24,className:"text-white absolute group-hover:scale-0 transition-transform duration-200"}),e.jsx(j,{size:24,className:"text-white absolute scale-0 group-hover:scale-100 transition-transform duration-200"})]})})]})};export{$ as default};
